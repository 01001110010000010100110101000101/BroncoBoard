<!DOCTYPE html>
<html>
<head>
    <title>Hello WebSocket</title>
    <script src="sockjs-0.3.4.js"></script>
    <script src="stomp.js"></script>
    <script type="text/javascript">
        var stompClient = null;
        function connect() {
            var socket = new SockJS('/hello');
            stompClient = Stomp.over(socket);
            stompClient.connect({}, function(frame) {
                console.log('Connected: ' + frame);
                stompClient.subscribe('/topic/greetings', 
                	function(greeting){
                    	showGreeting(JSON.parse(greeting.body).content);
                    
                	});
            	});
        	}
                    
        document.getElementById('response').innerHTML = '';
                    
        function sendMessage() {
            var message = document.getElementById('message').value;
            stompClient.send("/app/userMessage", {}, JSON.stringify({ 'message': message }));
        }

        function showGreeting(message) {
            var response = document.getElementById('response');
            var p = document.createElement('p');
            p.style.wordWrap = 'break-word';
            p.appendChild(document.createTextNode(message));
            response.appendChild(p);
        }
    </script>
</head>
<body>

    <script>
        connect();
    </script>

    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-comment"></span> CLASS_NAME
                </div>
                <div class="panel-body" id="chat-box">
                    <ul class="chat">
                        <message name='User_1'
                        time='12'
                        content='Lorem ipsum dolor sit amet, 
                            consectetur adipiscing elit. Curabitur bibendum ornare dolor,
                            quis ullamcorper ligula sodales.'>
                        </message>
                        <message 
                            name='User_2'
                            time='8'
                            content="NOTICE: This is just the front end!!! 
                                This doesn't have any functionality yet.">
                        </message>
                    </ul>
                </div>
                <div class="panel-footer">
                    <div class="input-group">
                    
                        <input id="message" type="text" class="form-control input-sm" placeholder="Type your message here..." />
                        <span class="input-group-btn">
                            <button
                                class="btn btn-primary btn-sm"
                                id="sendMessage"
                                onclick="sendMessage(); document.getElementById('message').value='';">SEND
                            </button>
                                <p id="response"></p>
        
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-sm-1"></div>
        </div>
    </div>
    
    </body>
</html>
